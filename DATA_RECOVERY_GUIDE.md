# 📚 数据恢复指南

## 🔍 会员数据丢失了怎么办？

如果您发现会员数据丢失，请不要慌张！按照以下步骤进行检查和恢复。

---

## 📋 快速检查清单

### 1. 访问数据恢复助手
```
访问路径：数据管理 → 数据恢复助手
或直接访问：data-recovery.html
```

### 2. 点击"检查数据状态"
系统会自动检查并显示：
- ✅ 会员记录数量
- ✅ 训练记录数量
- ✅ 存储空间使用情况

---

## 🤔 数据丢失的常见原因

### 1. **清除了浏览器缓存**
- ❌ 问题：清理浏览器缓存时，localStorage数据会被删除
- ✅ 解决：定期导出备份，避免依赖浏览器存储

### 2. **使用了隐私/无痕浏览模式**
- ❌ 问题：隐私模式关闭后数据不会保存
- ✅ 解决：使用普通浏览模式访问系统

### 3. **更换了浏览器或设备**
- ❌ 问题：不同浏览器/设备的localStorage是独立的
- ✅ 解决：使用备份文件在新设备上恢复数据

### 4. **误点了"清空所有数据"**
- ❌ 问题：此操作会永久删除所有数据
- ✅ 解决：只能通过备份文件恢复

### 5. **浏览器存储空间已满**
- ❌ 问题：localStorage有容量限制（通常5-10MB）
- ✅ 解决：清理其他网站数据或使用备份功能

---

## 💾 数据恢复方案

### 方案1：从备份文件恢复（推荐）

#### 步骤：
1. 打开"数据恢复助手"
2. 点击"导入备份"按钮
3. 选择之前导出的 `.json` 备份文件
4. 确认导入

#### 备份文件命名格式：
```
backup-2025-10-23.json
fitness-data-2025-10-23.json
```

#### 备份文件内容示例：
```json
{
  "exportDate": "2025-10-23T10:30:00.000Z",
  "version": "1.0",
  "members": [...],
  "trainings": [...]
}
```

---

### 方案2：查看原始数据

如果数据还在但显示异常：

1. 打开"数据恢复助手"
2. 点击"查看原始数据"
3. 检查数据格式是否正确
4. 如有问题，可手动修复后重新导入

---

### 方案3：从其他浏览器恢复

如果在其他浏览器中有数据：

1. 在原浏览器中导出数据
2. 在当前浏览器中导入数据

---

### 方案4：重新录入

如果没有备份：
1. 返回首页
2. 重新添加会员信息
3. **立即导出备份**，避免再次丢失

---

## 🛡️ 数据安全建议

### 定期备份（重要！）

**建议频率：**
- 📅 每周备份一次
- 📅 添加大量数据后立即备份
- 📅 系统升级前备份

**备份方法：**
```
数据管理 → 数据备份 → 导出数据
```

**存储位置：**
- 💾 本地硬盘
- ☁️ 云盘（百度网盘、OneDrive等）
- 📧 邮箱附件
- 📱 手机存储

---

### 多重保护

#### 1. 使用固定浏览器
- 建议使用Chrome、Edge、Firefox等主流浏览器
- 避免频繁更换浏览器

#### 2. 避免清理缓存
- 清理浏览器缓存时，注意不要清除localStorage
- Chrome：设置 → 隐私和安全 → 清除浏览数据 → 不勾选"Cookie及其他网站数据"

#### 3. 定期查看数据
- 每周检查一次数据是否完整
- 使用"数据概览"功能查看统计信息

#### 4. 版本控制
- 每次备份使用不同文件名（如：backup-2025-10-23.json）
- 保留最近3-5个版本的备份

---

## 🔧 技术细节

### localStorage 存储说明

系统使用浏览器的localStorage存储数据：

**存储键名：**
- `fitnessMembers` - 会员数据
- `trainingRecords` - 训练记录
- `next_member_id` - 下一个会员ID
- `next_record_id` - 下一个训练记录ID

**查看方法：**
1. 打开浏览器开发者工具（F12）
2. 切换到"Application"或"存储"标签
3. 左侧选择"Local Storage"
4. 查看对应域名下的数据

---

## ❓ 常见问题

### Q1: 导出的备份文件在哪里？
**A:** 通常在浏览器的默认下载文件夹中，文件名为`backup-日期.json`或`fitness-data-日期.json`

### Q2: 备份文件可以在其他设备上使用吗？
**A:** 可以！备份文件是JSON格式，可以在任何设备、任何浏览器上导入使用。

### Q3: 数据会自动备份吗？
**A:** 不会。目前需要手动导出备份。建议定期（如每周）导出一次。

### Q4: 如果误删了会员怎么办？
**A:** 如果有备份，可以导入备份恢复。如果没有备份，只能重新录入。

### Q5: 可以恢复部分数据吗？
**A:** 可以。导出备份后，用文本编辑器打开JSON文件，手动编辑后重新导入。

### Q6: 数据安全吗？
**A:** 数据完全存储在您的浏览器本地，不会上传到服务器，非常安全。但也意味着需要您自己负责备份。

### Q7: 系统更新会影响数据吗？
**A:** 正常情况下不会。但建议在系统更新前先导出备份，以防万一。

---

## 📞 紧急情况处理

### 情况1：数据全部丢失且无备份
1. 查看是否有其他设备访问过系统
2. 检查云盘/邮箱是否有之前的备份
3. 如果完全没有，只能重新录入
4. **立即建立备份机制**

### 情况2：数据部分丢失
1. 导出当前数据
2. 用文本编辑器查看JSON文件
3. 尝试手动补充丢失的数据
4. 重新导入

### 情况3：数据格式错误
1. 使用"查看原始数据"功能
2. 复制数据到文本编辑器
3. 修正格式错误
4. 手动保存到localStorage或通过导入功能恢复

---

## ✅ 预防措施检查表

- [ ] 已设置每周备份提醒
- [ ] 备份文件保存在安全位置（云盘/硬盘）
- [ ] 使用固定浏览器访问系统
- [ ] 清理浏览器缓存时注意保护localStorage
- [ ] 定期检查数据完整性
- [ ] 保留多个版本的备份文件

---

## 🚀 未来改进计划

- [ ] 自动定期备份提醒
- [ ] 云端同步功能
- [ ] 数据版本管理
- [ ] 回收站功能（误删可恢复）
- [ ] 实时数据监控

---

## 📱 快速访问

- 🔗 [数据恢复助手](data-recovery.html)
- 🔗 [数据管理](data-management.html)
- 🔗 [首页](index.html)

---

**💡 记住：定期备份是保护数据的最佳方法！**

建议立即导出一份备份，并妥善保存。

---

**最后更新：** 2025-10-23  
**版本：** 1.0
